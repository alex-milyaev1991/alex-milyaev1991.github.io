import{T as m}from"./lightweight-charts-27GjbuBC.js";import{a as C}from"./axios-BKKeQTxe.js";import"./vue-BBAXGWAI.js";import{_ as u}from"./index-B0Tcn67C.js";import{j as c,s as h,k as f,c as p}from"./vuetify-D_nCyq_r.js";import{a0 as b,a1 as S,a2 as n,z as l,a5 as d,a4 as y}from"./@vue-BpmQINlQ.js";import"./fancy-canvas-C_HslfXu.js";import"./vue-router-Bmip_Tvc.js";const v={ref:"chartContainer",class:"chart-container"},x=u({name:"CryptoChart",data:()=>({coins:["BTC","ETH","SOL","DOGE","ADA"],periods:["1 week","2 weeks","1 month","3 months","1 year"],selectedCoin:"BTC",selectedPeriod:"1 week",chart:null,areaSeries:null,coinSelectStyle:{maxWidth:"150px"},periodSelectStyle:{maxWidth:"150px"}}),mounted(){this.createChart(),this.fetchData(),window.addEventListener("resize",this.resizeChart),this.$refs.chartContainer.addEventListener("touchstart",this.onChartTouch)},beforeDestroy(){window.removeEventListener("resize",this.resizeChart),this.chart&&(this.chart.remove(),this.chart=null),this.$refs.chartContainer.removeEventListener("touchstart",this.onChartTouch)},watch:{selectedCoin:"fetchData",selectedPeriod:"fetchData"},methods:{createChart(){const e=this.$refs.chartContainer;e&&(this.chart=m(e,{width:e.clientWidth,height:300,layout:{backgroundColor:"transparent",textColor:"#717184",fontFamily:"Urbanis, sans-serif"},grid:{vertLines:{visible:!0},horzLines:{visible:!1}},priceScale:{borderVisible:!1,priceLineSource:!0,priceLineVisible:!0,scaleMargins:{top:.2,bottom:.2},position:"right"},timeScale:{borderVisible:!1,timeVisible:!0,secondsVisible:!1,rightBarStaysOnScroll:!0,lockVisibleTimeRangeOnResize:!0,tickMarkFormatter:i=>new Date(1e3*i).toLocaleDateString("en-US",{month:"short",day:"numeric"})},handleScroll:!0,handleScale:!1}),this.areaSeries=this.chart.addAreaSeries({crosshairMarkerVisible:!0,lineColor:"#5235E8",topColor:"rgba(82, 53, 232, 0.5)",bottomColor:"rgba(82, 53, 232, 0.2)",lineWidth:3,lastValueVisible:!0}),this.chart.subscribeCrosshairMove(this.onCrosshairMove),this.chart.subscribeClick(this.onChartClick))},async fetchData(){const e={"1 week":"1h","2 weeks":"2h","1 month":"4h","3 months":"8h","1 year":"1w"}[this.selectedPeriod],i={"1 week":7,"2 weeks":14,"1 month":30,"3 months":60,"1 year":365}[this.selectedPeriod],o=`${this.selectedCoin}USDT`,a=Math.floor(Date.now()/1e3),t=a-24*i*60*60;try{const r=(await C.get("https://api.binance.com/api/v3/klines",{params:{symbol:o,interval:e,startTime:1e3*t,endTime:1e3*a}})).data.map(s=>({time:s[0]/1e3,value:parseFloat(s[4])}));this.areaSeries.setData(r),this.chart.timeScale().fitContent()}catch(r){console.error("Error fetching data from Binance API:",r)}},resizeChart(){const e=this.$refs.chartContainer;e&&this.chart&&this.chart.resize(e.clientWidth,300)},onCrosshairMove(e){},onChartClick(e){},onChartTouch(e){const i=e.touches[0],o=this.$refs.chartContainer.getBoundingClientRect(),a=i.clientX-o.left,t=i.clientY-o.top,r={x:a,y:t};this.onChartClick({point:r,time:this.chart.timeScale().coordinateToTime(a),seriesData:new Map([[this.areaSeries,{value:this.areaSeries.priceToCoordinate(t)}]])})}}},[["render",function(e,i,o,a,t,r){return b(),S(p,null,{default:n(()=>[l(c,{justify:"center",align:"center",class:"mb-5 mt-16 selectsCourse"},{default:n(()=>[l(h,{modelValue:t.selectedCoin,"onUpdate:modelValue":i[0]||(i[0]=s=>t.selectedCoin=s),items:t.coins,label:"Select Coin",variant:"solo",dense:"",class:"ml-16 mr-2",style:d(t.coinSelectStyle)},null,8,["modelValue","items","style"]),l(h,{modelValue:t.selectedPeriod,"onUpdate:modelValue":i[1]||(i[1]=s=>t.selectedPeriod=s),items:t.periods,label:"Select Period",variant:"solo",dense:"",class:"mr-16 ml-2",style:d(t.periodSelectStyle)},null,8,["modelValue","items","style"])]),_:1}),l(c,null,{default:n(()=>[l(f,{cols:"12",class:"px-0 py-0"},{default:n(()=>[y("div",v,null,512)]),_:1})]),_:1})]),_:1})}],["__scopeId","data-v-bff23045"]]);export{x as default};
